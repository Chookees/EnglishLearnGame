<Window x:Class="EnglishLearnGame.SaveFileSelectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:EnglishLearnGame"
        Title="Spielstand auswählen - English Learning Game" 
        Height="600" 
        Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F0F8FF">
    
    <Window.Resources>
        <local:CharacterImageConverter x:Key="CharacterImageConverter"/>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="20,20,20,10">
            <TextBlock Text="💾 Spielstand auswählen" 
                       FontSize="32" 
                       FontWeight="Bold" 
                       Foreground="#2E8B57" 
                       HorizontalAlignment="Center"
                       Margin="0,0,0,10"/>
            
            <TextBlock Text="Wähle einen deiner gespeicherten Charaktere aus:" 
                       FontSize="16" 
                       Foreground="#4682B4" 
                       HorizontalAlignment="Center"/>
        </StackPanel>
        
        <!-- Character Selection -->
        <ScrollViewer Grid.Row="1" Margin="20,0,20,20" VerticalScrollBarVisibility="Auto">
            <ItemsControl Name="CharactersItemsControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="2"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White" 
                                CornerRadius="10" 
                                BorderThickness="2" 
                                BorderBrush="#E0E0E0" 
                                Margin="10" 
                                Padding="15">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#4682B4"/>
                                            <Setter Property="Background" Value="#F8F9FA"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            
                            <Button Background="Transparent" 
                                    BorderThickness="0" 
                                    Padding="0" 
                                    Click="CharacterButton_Click"
                                    Tag="{Binding}"
                                    Cursor="Hand">
                                <StackPanel>
                                    <!-- Character Preview -->
                                    <Grid Height="120" Margin="0,0,0,10">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        
                                        <!-- Character Display -->
                                        <Grid Grid.Row="0" 
                                              Background="White" 
                                              ClipToBounds="True">
                                            <!-- Single Character Image -->
                                            <Image Width="100" 
                                                   Height="100" 
                                                   Stretch="Uniform"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Source="{Binding Converter={StaticResource CharacterImageConverter}, ConverterParameter=character}"/>
                                        </Grid>
                                        
                                        <!-- Character Info -->
                                        <StackPanel Grid.Row="1" HorizontalAlignment="Center">
                                            <TextBlock Text="{Binding Name}" 
                                                       FontSize="16" 
                                                       FontWeight="Bold" 
                                                       Foreground="#2E8B57" 
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="{Binding Age, StringFormat='Alter: {0}'}" 
                                                       FontSize="12" 
                                                       Foreground="#4682B4" 
                                                       HorizontalAlignment="Center"/>
                                            <TextBlock Text="{Binding Class, StringFormat='Klasse: {0}'}" 
                                                       FontSize="12" 
                                                       Foreground="#4682B4" 
                                                       HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                    
                                    <!-- Additional Info -->
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="{Binding CreatedDate, StringFormat='Erstellt: {0:dd.MM.yyyy}'}" 
                                                   FontSize="10" 
                                                   Foreground="#708090" 
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Text="Klicken zum Fortfahren" 
                                                   FontSize="10" 
                                                   Foreground="#32CD32" 
                                                   FontWeight="Bold"
                                                   HorizontalAlignment="Center"
                                                   Margin="0,5,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Button>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
        
        <!-- Bottom Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    Margin="20,0,20,20">
            <Button Name="NewCharacterButton" 
                    Content="➕ Neuer Charakter" 
                    Width="150" 
                    Height="40" 
                    FontSize="14" 
                    FontWeight="Bold"
                    Background="#32CD32" 
                    Foreground="White"
                    BorderThickness="0"
                    Margin="0,0,10,0"
                    Click="NewCharacterButton_Click"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            CornerRadius="5" 
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            BorderBrush="{TemplateBinding BorderBrush}">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                          VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#228B22"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>
            
            <Button Name="CancelButton" 
                    Content="❌ Abbrechen" 
                    Width="120" 
                    Height="40" 
                    FontSize="14" 
                    FontWeight="Bold"
                    Background="#DC143C" 
                    Foreground="White"
                    BorderThickness="0"
                    Click="CancelButton_Click"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            CornerRadius="5" 
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            BorderBrush="{TemplateBinding BorderBrush}">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                          VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#B22222"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
